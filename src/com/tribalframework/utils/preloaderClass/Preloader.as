/*** ** Simple Preloader** com.tribalframework.utils.preloaderClass.Preloader** @ver 1.0** @date 16-07-2010***************************************/package com.tribalframework.utils.preloaderClass{	import flash.display.*;	import flash.events.*;	import flash.net.*;	import flash.text.TextField;		public class Preloader	{		static public var loader:Loader;		static private var i:Number;		static private var loadValue:Number = 0;		static private var maxValue:Number = 0;				static private var _stg:Object;		static private var _text:TextField;		static private var _mc:MovieClip;				static public var loadDone:Boolean;				public function Preloader(){					}				/*		** stg:Object = shell fla's stage or MC placeholder		** url:String = location of child SWF		** example: Preloader.init( stage, "myMovie.swf" );		**			Preloader.initLoadingText( txtName );		**			Preloader.initLoadingBar( mcName );		**********************************************************/		static public function init(stg:Object, url:String){			_stg = stg;						loader = new Loader();			loader.load(new URLRequest(url));						_stg.addEventListener(Event.ENTER_FRAME, actionF);						i = -1;			i++;			if(i == 0){				loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, loadProg);			}		}				/* 		*	init textfield to show percentage of loading progress 		*********************************************************/		static public function initLoadingText(t:TextField){			_text = t;		}				/* 		*		init x-axis loading bar mc		******************************************/		static public function initLoadingBar(mc:MovieClip){			_mc = mc;			_mc.scaleX = 0;		}						static private function actionF(e:Event){			if(loadValue < maxValue){				loadValue++;								if(_text != null){					_text.text = loadValue + '';				}								if(_mc != null){					_mc.scaleX = (loadValue / maxValue) ;				}								trace(loadValue);			}			else if(loadValue == maxValue && maxValue == 100){				_stg.removeEventListener(Event.ENTER_FRAME, actionF);								if(_text != null){					_text.text = '';				}				if(_mc != null){					_mc.visible = false;				}								displayLoadedContent();			}		}				static private function loadProg(e:ProgressEvent){			var perc:Number = Math.floor((e.bytesLoaded / e.bytesTotal) * 100);			maxValue = perc;			if(maxValue > perc){				maxValue = 100;			}		}				/* 		* 		visually display loaded SWF		****************************************/		static public function displayLoadedContent(){						_stg.addChild(loader);						var temp = loader.content;			if(temp.currentFrame != temp.totalFrames){				temp.gotoAndPlay(2);			}			loadDone = true;		}			}}