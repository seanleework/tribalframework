/*** ** Sparkle effect** com.tribalframework.utils.sparkle.Sparkle;** @ver 1.0** @date 05-07-2010***************************************/package com.tribalframework.utils.sparkle{	import flash.display.*;	import flash.events.*;	import flash.utils.*;	import com.greensock.TweenMax;		public class Sparkle	{		private var _mc:MovieClip;		private var _stg:Object;		private var _w:Number;		private var _h:Number;				private var _maxTotal:Number;		private var sparkleArray:Array;				private var maxScale:Number;		private var minScale:Number;		private var posX:Number;		private var posY:Number;				private var i:Number=0;		private var counter:Number=0;		private var _counterLimit:Number;		private var mcCounter:Number=0;				private var killMcCounter:Number;				private var temp:Number;				public function Sparkle(){					}					public function init(mc:MovieClip, stg:Object, w:Number=550, h:Number=400, counterLimit:Number=60, maxTotal:Number=99){			_mc = mc;			_stg = stg;			_w = w;			_h = h;			_counterLimit = counterLimit;						_maxTotal = maxTotal;			sparkleArray = new Array();						/*for(var i = 0; i < _maxTotal; i++){								/*_mc = new mcClass();				_mc.name = "mc"+i;				_mc.x = Math.random() * w;				_mc.y = Math.random() * h;				sparkleArray.push(_mc);				_stg.addChild(_mc);											}*/			counter = Math.floor(Math.random() * _counterLimit);						_stg.addEventListener(Event.ENTER_FRAME, actionF);					}				private function actionF(e:Event){					//	trace('counter '+counter, 'i '+i);							i++;				if(counter == i && mcCounter != _maxTotal){										_mc = new mcClass();										_mc.x = Math.random() * _w;					_mc.y = Math.random() * _h;				//	sparkleArray.push(_mc);					_mc.name = "_mc"+mcCounter;					_stg.addChild(_mc);					_mc.alpha = 0;					TweenMax.to(_mc, 0.5,{alpha:1});					TweenMax.to(_mc, 2,{x:_mc.x + Math.random()*5, y:_mc.y - Math.random()*20});					TweenMax.to(_mc, 1,{delay:1, alpha:0});										trace('mcCounter '+mcCounter);										mcCounter++;										i = 0;					counter = 0;					counter = Math.floor(Math.random() * _counterLimit);				}				else if(mcCounter == _maxTotal){					_stg.removeEventListener(Event.ENTER_FRAME, actionF);					i = 0;					counter = 0;				}						}				private function killSparkle(){					}		}}